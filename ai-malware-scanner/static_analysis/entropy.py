import math
from collections import Counter

def shannon_entropy(data):
    """
    Calculate the Shannon entropy of data.
    
    Args:
        data (bytes or str): Data to calculate entropy for
        
    Returns:
        float: Shannon entropy value (between 0 and 8 for byte data)
    """
    if isinstance(data, str):
        data = data.encode('utf-8')
    
    if not data:
        return 0.0
    
    # Count occurrences of each byte
    counter = Counter(data)
    data_len = len(data)
    
    # Calculate entropy using Shannon's formula: -âˆ‘(p_i * log2(p_i))
    entropy = 0.0
    for count in counter.values():
        probability = count / data_len
        entropy -= probability * math.log2(probability)
    
    return entropy
